(self["webpackChunkvue_template_lyl"]=self["webpackChunkvue_template_lyl"]||[]).push([[633],{417:function(e){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"emptyList":"Your playlist is empty","listSingleAudio":"Your playlist is just one song","playMode":"Play Mode","loopList":"loopList","singleLoop":"singleLoop","shufflePlay":"shufflePlay","sequentialPlay":"sequentialPlay"},"zh":{"emptyList":"播放列表是空的","listSingleAudio":"播放列表只有一首歌","playMode":"播放模式","loopList":"列表循环","singleLoop":"单曲循环","shufflePlay":"随机播放","sequentialPlay":"顺序播放"}}'),delete e.options._Ctor}},6633:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return R}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"audioPlayer"},[t("div",{staticClass:"container"},[t("div",{staticClass:"virtualDevice"},[t("CdReader",{staticClass:"reader"}),t("div",{staticClass:"infoPanel"},[t("AudioVisualize",{staticClass:"playerControl"}),t("PlayerControl",{staticClass:"playerControl"})],1)],1),t("div",{staticClass:"lyricsPanel"},[t("LyricsPanel",{staticClass:"box"})],1)])])},a=[],o=function(){var e=this,t=e._self._c;return t("div",{ref:"CdReader",staticClass:"CdReader"},[t("div",{staticClass:"reader-core"},[t("div",{staticClass:"internal"},[e.soundImage?t("CompactDisk",{staticClass:"compactDisk",attrs:{image:e.soundImage,bgColor:"#000"}}):e._e()],1),e._m(0),e._m(1)]),t("div",{staticClass:"brandLogo"},[e._v("SHINSHA")])])},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"shell"},[t("div",{staticClass:"shellCore"},[t("div",{staticClass:"bracket"}),t("div",{staticClass:"mask"})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"sign"},[t("span",[e._v("DISC")]),t("span",[e._v("DIGITAL AUDIO")])])}],r=s(7266),l=s(3518),u={name:"CdReader",components:{CompactDisk:r.A},data(){return{soundImage:null}},methods:{},computed:{...(0,l.aH)("player",{currentPlayId:e=>e.currentPlayId,playList:e=>e.playList,resetPlayerTrigger:e=>e.resetPlayerTrigger})},watch:{currentPlayId:{handler(){if(this.currentPlayId){const e=this.playList.find((e=>e.soundId===this.currentPlayId));this.soundImage=e.albumImage}},immediate:!0},resetPlayerTrigger(){this.soundImage=null}},created(){},mounted(){const e=window.innerWidth||document.body.offsetWidth,t=this.$refs.CdReader,s=t.offsetWidth/(e/100);t.style.height=`${s}vw`},beforeDestroy(){}},d=u,c=s(1656),h=(0,c.A)(d,o,n,!1,null,"cb503d90",null),y=h.exports,p=function(){var e=this;e._self._c;return e._m(0)},m=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"adioVisualize"},[t("div",{staticClass:"showArea"},[t("div",{attrs:{id:"frequencyChart"}})])])}],f=(s(4114),s(6573),s(8100),s(7936),s(7467),s(4732),s(6720),s(9671)),g={name:"AudioVisualize",data(){return{frequencyChart:null,frequencyOption:null}},methods:{setFrequencyOption(){const e=[];for(let t=0;t<64;t++){const s=5.625*t;e.push(`hsl(${s}, 100%, 50%)`)}this.frequencyOption={xAxis:{type:"category",show:!1},yAxis:{type:"value",show:!1,max:255,min:0},grid:{left:"0",right:"0",top:"0",bottom:"0"},animation:!1,cursor:"default",series:[{data:[],type:"bar",barCategoryGap:1,itemStyle:{color:function(t){return e[t.dataIndex]}},emphasis:{disabled:!0}}]}},createVisualizeAudio(){this.frequencyChart=f.Ts(document.getElementById("frequencyChart")),this.setFrequencyOption(),this.frequencyChart&&this.frequencyChart.setOption(this.frequencyOption);let e=null;window.onresize=()=>{null===e&&(e=setTimeout((()=>{this.setFrequencyOption(),this.frequencyChart&&this.frequencyChart.setOption(this.frequencyOption),this.frequencyChart.resize(),e=null}),50))}}},computed:{...(0,l.aH)("player",{audioAnalyser:e=>e.audioAnalyser,animationFrameTrigger:e=>e.animationFrameTrigger,resetPlayerTrigger:e=>e.resetPlayerTrigger})},watch:{animationFrameTrigger(){this.audioByteFrequencyData=new Uint8Array(this.audioAnalyser.frequencyBinCount),this.audioAnalyser.getByteFrequencyData(this.audioByteFrequencyData);const e=Array.from(this.audioByteFrequencyData);this.frequencyOption.series[0].data=e,this.frequencyChart&&this.frequencyChart.setOption(this.frequencyOption)},resetPlayerTrigger(){this.$nextTick((()=>{this.frequencyOption.series[0].data=[],this.frequencyChart&&this.frequencyChart.setOption(this.frequencyOption)}))}},created(){},mounted(){this.createVisualizeAudio()},beforeDestroy(){}},v=g,C=(0,c.A)(v,p,m,!1,null,"c4328248",null),P=C.exports,L=function(){var e=this,t=e._self._c;return t("div",{staticClass:"playerControl"},[t("div",{staticClass:"showArea"},[t("div",{ref:"audioName",staticClass:"audioName"},[e._v(e._s(e.soundName))]),t("el-slider",{staticClass:"progressSlider",attrs:{max:e.audioTotalDuration,min:0,"show-tooltip":!1,disabled:0===e.audioTotalDuration},model:{value:e.audioCurrentTime,callback:function(t){e.audioCurrentTime=t},expression:"audioCurrentTime"}}),t("div",{staticClass:"controlArea"},[t("div",{staticClass:"timeMonitor"},[e._v(" "+e._s(e.progressBarFormatTimeUtil(e.audioCurrentTime))+" / "+e._s(e.progressBarFormatTimeUtil(e.audioTotalDuration))+" ")]),t("div",{staticClass:"control-group"},[t("LikeCom",{staticClass:"control-like",attrs:{id:e.currentPlayId}}),t("div",{staticClass:"control-previous",on:{click:function(t){return e.toggleAudio("previous")}}},[t("span",{staticClass:"iconfont icon-bofangshangyige"})]),t("div",{staticClass:"control-play",on:{click:e.playAudio}},[e.playState?t("span",{staticClass:"iconfont icon-zanting"}):t("span",{staticClass:"iconfont icon-bofang"})]),t("div",{staticClass:"control-next",on:{click:function(t){return e.toggleAudio("next")}}},[t("span",{staticClass:"iconfont icon-bofangxiayige"})]),t("div",{staticClass:"control-mode",on:{click:e.togglePlayMode}},[t("span",{directives:[{name:"show",rawName:"v-show",value:"shufflePlay"===e.playMode,expression:"playMode === 'shufflePlay'"}],staticClass:"iconfont icon-suijibofang"}),t("span",{directives:[{name:"show",rawName:"v-show",value:"loopList"===e.playMode,expression:"playMode === 'loopList'"}],staticClass:"iconfont icon-liebiaoxunhuan"}),t("span",{directives:[{name:"show",rawName:"v-show",value:"singleLoop"===e.playMode,expression:"playMode === 'singleLoop'"}],staticClass:"iconfont icon-danduxunhuan"}),t("span",{directives:[{name:"show",rawName:"v-show",value:"sequentialPlay"===e.playMode,expression:"playMode === 'sequentialPlay'"}],staticClass:"iconfont icon-shunxubofang"})])],1),t("div",{staticClass:"control-volume"},[t("span",{staticClass:"iconfont icon-shengyin"}),t("el-slider",{staticClass:"volumeSlider",attrs:{min:0,max:100},model:{value:e.volume,callback:function(t){e.volume=t},expression:"volume"}})],1)])],1)])},x=[],T=s(6334),A={name:"PlayerControl",components:{LikeCom:T.A},data(){return{playModeIndex:1,playModeMap:{1:"loopList",2:"singleLoop",3:"shufflePlay",4:"sequentialPlay"},soundName:""}},methods:{playAudio(){if(0===this.playList.length)return this.$message.warning(this.$t("emptyList"));this.currentPlayId?this.$store.commit("player/activeTogglePlayStateTrigger",!this.playState):(this.$store.commit("player/updateCurrentPlayIndex",0),this.$store.commit("player/activeFirstPlayAudioTrigger"))},togglePlayMode(){this.playModeIndex<Object.keys(this.playModeMap).length?this.playModeIndex+=1:this.playModeIndex=1;const e=this.playModeMap[this.playModeIndex];this.$store.commit("player/activeTogglePlayModeTrigger",e),this.$notify({title:this.$t("playMode"),message:this.$t(e),position:"bottom-right",showClose:!1,duration:2500})},toggleAudio(e){return 0===this.playList.length?this.$message.warning(this.$t("emptyList")):1===this.playList.length?this.$message.warning(this.$t("listSingleAudio")):void this.$store.commit("player/activeSwitchAudioTrigger",e)},progressBarFormatTimeUtil(e){const t=Math.floor(e/60),s=e%60,i=String(t).padStart(2,"0"),a=String(s).padStart(2,"0");return`${i}:${a}`},adjustFontSizeUtil(e="",{defaultTextLength:t=0,defaultFontSize:s=12,vwModel:i=!1}={}){let a=0;const o=[{regex:/[\u4e00-\u9fa5]/,value:1},{regex:/[a-zA-Z0-9]/,value:.5},{regex:/[\u3040-\u309F\u30A0-\u30FF]/,value:1},{regex:/[ .,!?;:()&'"-]/,value:.5},{regex:/[，。！？；：、（）—]/,value:1}];for(const r of e)for(const e of o)if(e.regex.test(r)){a+=e.value;break}a=Math.ceil(a);let n=s;return a>t&&(n=s*t/a),i?(n/=19.2,`${n}vw`):`${n}px`}},computed:{...(0,l.aH)("player",{playState:e=>e.playState,playList:e=>e.playList,currentPlayId:e=>e.currentPlayId}),volume:{get(){return this.$store.state.player.volume},set(e){this.$store.commit("player/updateVolume",e)}},playMode(){return this.$store.state.player.playMode},audioCurrentTime:{get(){return this.$store.state.player.audioTime.currentTime},set(e){this.$store.commit("player/updateAudioTime",{currentTime:e})}},audioTotalDuration(){return this.$store.state.player.audioTime.totalDuration}},watch:{currentPlayId:{handler(){if(this.currentPlayId){const e=this.playList.find((e=>e.soundId===this.currentPlayId));this.soundName=e.soundName,this.soundImage=e.albumImage}else this.soundName="",this.soundImage=null},immediate:!0},soundName:{handler(){const e=this.adjustFontSizeUtil(this.soundName,{vwModel:!0,defaultTextLength:14,defaultFontSize:32});this.$nextTick((()=>{this.$refs.audioName.style.fontSize=e}))},immediate:!0}},created(){Object.keys(this.playModeMap).forEach((e=>{this.playModeMap[e]===this.playMode&&(this.playModeIndex=+e)}))},mounted(){},beforeDestroy(){}},w=A,_=s(417),I=s.n(_),M=I(),b=(0,c.A)(w,L,x,!1,null,"0ca14b40",null);"function"===typeof M&&M(b);var q=b.exports,$=function(){var e=this,t=e._self._c;return t("div",{ref:"lyricsPanel",staticClass:"lyricsPanel"},[t("div",{staticClass:"main"},e._l(e.displayLines,(function(s,i){return t("p",{key:i,domProps:{innerHTML:e._s(s)}})})),0)])},S=[],k={name:"LyricsPanel",data(){return{lines:{en:["> Start Self-test Program","> Virtual device rendering successful","> Detect that personal server is offline, Lyrics rendering failed","> Foreseeable Errors, Please do not contact the administrator","> ...","> Load Reserve Information","> Welcome to SHINSHA brand's virtual devices","> We sincerely thank you for choosing our brand's equipment","> Wish you a pleasant experience!","> ","> End"],zh:["> 自检程序启动","> 虚拟设备渲染成功","> 检测到个人服务器离线，歌词渲染失败","> 可预见的错误，请不要联系管理员","> ...","> 加载储备信息","> 欢迎使用 SHINSHA 品牌的虚拟设备","> 我们真诚感谢您选择我们品牌的设备","> 祝您体验愉快！","> ","> 结束"]},displayLines:[],isBlock:!1,isRun:!1}},methods:{startLoadingEffect(){let e=0,t=0;const s=500,i=30,a=()=>{if(this.isBlock)return this.isRun=!1,void(this.isBlock=!1);t<this.lines[this.lang][e].length?(this.displayLines.splice(e,1,this.displayLines[e]+this.lines[this.lang][e][t]),t++,setTimeout(a,i)):(t=0,e++,e<this.lines[this.lang].length?(this.isRun=!0,setTimeout(o,s)):this.isRun=!1)},o=()=>{setTimeout(a,i)};o()}},computed:{lang(){return this.$i18n.locale}},watch:{lang(){this.isRun&&(this.isBlock=!0),setTimeout((()=>{void 0!==this.lines[this.lang][0]&&(this.displayLines=this.lines[this.lang].map((()=>"")),this.startLoadingEffect())}),500)}},created(){},mounted(){this.$globalProperty.settings.initialLoad?this.displayLines=this.lines[this.lang]:setTimeout((()=>{void 0!==this.lines[this.lang][0]&&(this.displayLines=this.lines[this.lang].map((()=>"")),this.startLoadingEffect(),this.$globalProperty.settings.initialLoad=!0)}),500);const e=window.innerWidth|document.body.offsetWidth,t=this.$refs.lyricsPanel,s=t.offsetWidth/(e/100),i=s/16*9;t.style.height=`${i}vw`},beforeDestroy(){}},D=k,F=(0,c.A)(D,$,S,!1,null,"6ead9984",null),O=F.exports,z={name:"AudioPlayer",components:{CdReader:y,PlayerControl:q,AudioVisualize:P,LyricsPanel:O},data(){return{}},methods:{},computed:{},watch:{},created(){},mounted(){},beforeDestroy(){}},N=z,B=(0,c.A)(N,i,a,!1,null,"6164ac08",null),R=B.exports}}]);